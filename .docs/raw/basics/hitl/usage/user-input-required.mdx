---
title: User Input Required for Tool Execution
sidebarTitle: User Input Required
keywords: [user input, requires_user_input, user_input_fields, UserInputField, form input]
description: This example demonstrates how to create tools that require user input before execution, allowing for dynamic data collection during agent runs.
mode: wide
---

<Steps>

  <Step title="Create a Python file">
    Create a Python file for the example.
    ```bash
    touch user_input_required.py
    ```
  </Step>

  <Step title="Add the following code to your Python file">
    ```python user_input_required.py
    from typing import List

    from agno.agent import Agent
    from agno.db.sqlite import SqliteDb
    from agno.models.openai import OpenAIChat
    from agno.tools import tool
    from agno.tools.function import UserInputField
    from agno.utils import pprint


    # You can either specify the user_input_fields leave empty for all fields to be provided by the user
    @tool(requires_user_input=True, user_input_fields=["to_address"])
    def send_email(subject: str, body: str, to_address: str) -> str:
        """
        Send an email.

        Args:
            subject (str): The subject of the email.
            body (str): The body of the email.
            to_address (str): The address to send the email to.
        """
        return f"Sent email to {to_address} with subject {subject} and body {body}"


    agent = Agent(
        model=OpenAIChat(id="gpt-4o-mini"),
        tools=[send_email],
        markdown=True,
        db=SqliteDb(db_file="tmp/example.db"),
    )

    run_response = agent.run(
        "Send an email with the subject 'Hello' and the body 'Hello, world!'"
    )

    for requirement in run_response.active_requirements:
        if requirement.needs_user_input:
            input_schema: List[UserInputField] = requirement.user_input_schema  # type: ignore

            for field in input_schema:
                # Get user input for each field in the schema
                field_type = field.field_type
                field_description = field.description

                # Display field information to the user
                print(f"\nField: {field.name}")
                print(f"Description: {field_description}")
                print(f"Type: {field_type}")

                # Get user input
                if field.value is None:
                    user_value = input(f"Please enter a value for {field.name}: ")
                else:
                    print(f"Value: {field.value}")
                    user_value = field.value

                # Update the field value
                field.value = user_value

    run_response = agent.continue_run(
        run_id=run_response.run_id,
        requirements=run_response.requirements,
    )  # or agent.continue_run(run_response=run_response)
    pprint.pprint_run_response(run_response)

    # Or for simple debug flow
    # agent.print_response("Send an email with the subject 'Hello' and the body 'Hello, world!'")

    ```
  </Step>

  <Snippet file="create-venv-step.mdx" />

  <Step title="Install libraries">
    ```bash
    pip install -U agno openai
    ```
  </Step>

  <Step title="Export your OpenAI API key">

    <CodeGroup>

    ```bash Mac/Linux
      export OPENAI_API_KEY="your_openai_api_key_here"
    ```

    ```bash Windows
      $Env:OPENAI_API_KEY="your_openai_api_key_here"
    ```
    </CodeGroup>
  </Step>

  <Step title="Run Agent">
    <CodeGroup>
    ```bash Mac
    python user_input_required.py
    ```

    ```bash Windows
    python user_input_required.py
    ```
    </CodeGroup>
  </Step>

  <Step title="Find All Cookbooks">
    Explore all the available cookbooks in the Agno repository. Click the link below to view the code on GitHub:

    <Link href="https://github.com/agno-agi/agno/tree/main/cookbook/03_agents/human_in_the_loop" target="_blank">
      Agno Cookbooks on GitHub
    </Link>
  </Step>
</Steps>
