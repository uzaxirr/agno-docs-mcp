---
title: Pre-hooks and Post-hooks
sidebarTitle: Overview
description: Learn about using pre-hooks and post-hooks with your agents.
keywords: [pre-hooks, post-hooks, hooks, agent hooks, team hooks]
---

<Badge icon="code-branch" color="orange">
    <Tooltip tip="Introduced in v2.1.0" cta="View release notes" href="https://github.com/agno-agi/agno/releases/tag/v2.1.0">v2.1.0</Tooltip>
</Badge>

You can use hooks on agents and teams to do work before or after the main execution of the run.

Use cases for hooks include:

- Security guardrails (e.g. PII detection, prompt injection defense)
- Input validation
- Output validation
- Data preprocessing (e.g. normalizing input data)
- Data postprocessing (e.g. adding additional context to the output)
- Logging (e.g. logging the duration of the run)
- Debugging (e.g. debugging the run)


## When Hooks Are Triggered

Hooks execute at specific points in the Agent/Team run lifecycle:

- **Pre-hooks**: Execute immediately after the current session is loaded, **before** any processing begins. They run before the model context is prepared and before any LLM execution begins, i.e. any modifications to the input, session state, or dependencies will be applied before LLM execution.

- **Post-hooks**: Execute **after** the Agent/Team generates a response and the output is prepared, but **before** the response is returned to the user. In streaming responses, they run after each chunk of the response is generated.

## Pre-hooks

Pre-hooks execute at the very beginning of your Agent run, giving you complete control over what reaches the LLM.

They're perfect for implementing input validation, security checks, or any data preprocessing against the input your Agent receives.

### Common Use Cases

**Security Guardrails**
- Detect and prevent PII (Personally Identifiable Information) from reaching the LLM.
- Defend against prompt injection and jailbreak attempts.
- Filter NSFW or inappropriate content.
- See the [Guardrails](/basics/guardrails/overview) documentation for more details.

**Input Validation**
- Validate format, length, content or any other property of the input.
- Remove or mask sensitive information.
- Normalize input data.

**Data Preprocessing**
- Transform input format or structure.
- Enrich input with additional context.
- Apply any other business logic before sending the input to the LLM.

### Basic Example

Let's create a simple pre-hook that validates the input length and raises an error if it's too long:

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.exceptions import CheckTrigger, InputCheckError
from agno.run.agent import RunInput

# Simple function we will use as a pre-hook
def validate_input_length(
    run_input: RunInput,
) -> None:
    """Pre-hook to validate input length."""
    max_length = 1000
    if len(run_input.input_content) > max_length:
        raise InputCheckError(
            f"Input too long. Max {max_length} characters allowed",
            check_trigger=CheckTrigger.INPUT_NOT_ALLOWED,
        )

agent = Agent(
    name="My Agent",
    model=OpenAIChat(id="gpt-4o"),
    # Provide the pre-hook to the Agent using the pre_hooks parameter
    pre_hooks=[validate_input_length],
)
```

You can see complete examples of pre-hooks in the [Examples](/basics/hooks/usage/agent/input-transformation-pre-hook) section.

### Pre-hook Parameters

Pre-hooks run automatically during the Agent run and receive the following parameters:

- `run_input`: The input to the Agent run that can be validated or modified
- `agent`: Reference to the Agent instance
- `session`: The current agent session
- `run_context`: The current run context. See the [Run Context](/reference/run/run-context) reference.
- `debug_mode`: Whether debug mode is enabled (optional)

The framework automatically injects only the parameters your hook function accepts, so you can define hooks with just the parameters you need.

You can learn more about the parameters in the [Pre-hooks](/reference/hooks/pre-hooks) reference.


## Post-hooks

Post-hooks execute **after** your Agent generates a response, allowing you to validate, transform, or enrich the output before it reaches the user.

They're perfect for output filtering, compliance checks, response enrichment, or any other output transformation you need.

### Common Use Cases

**Output Validation**
- Validate response format, length, and content quality.
- Remove sensitive or inappropriate information from responses.
- Ensure compliance with business rules and regulations.

**Output Transformation**
- Add metadata or additional context to responses.
- Transform output format for different clients or use cases.
- Enrich responses with additional data or formatting.

### Basic Example

Let's create a simple post-hook that validates the output length and raises an error if it's too long:

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.exceptions import CheckTrigger, OutputCheckError
from agno.run.agent import RunOutput

# Simple function we will use as a post-hook
def validate_output_length(
    run_output: RunOutput,
) -> None:
    """Post-hook to validate output length."""
    max_length = 1000
    if len(run_output.content) > max_length:
        raise OutputCheckError(
            f"Output too long. Max {max_length} characters allowed",
            check_trigger=CheckTrigger.OUTPUT_NOT_ALLOWED,
        )

agent = Agent(
    name="My Agent",
    model=OpenAIChat(id="gpt-5-mini"),
    # Provide the post-hook to the Agent using the post_hooks parameter
    post_hooks=[validate_output_length],
)
```

You can see complete examples of post-hooks in the [Examples](/basics/hooks/usage/agent/input-transformation-pre-hook) section.

### Post-hook Parameters

Post-hooks run automatically during the Agent run and receive the following parameters:

- `run_output`: The output from the Agent run that can be validated or modified
- `agent`: Reference to the Agent instance
- `session`: The current agent session
- `run_context`: The current run context. See the [Run Context](/reference/run/run-context) reference.
- `user_id`: The user ID for the run (optional)
- `debug_mode`: Whether debug mode is enabled (optional)

The framework automatically injects only the parameters your hook function accepts, so you can define hooks with just the parameters you need.

You can learn more about the parameters in the [Post-hooks](/reference/hooks/post-hooks) reference.

## Guardrails

A popular use case for hooks are Guardrails: built-in safeguards for your Agents.

You can learn more about them in the [Guardrails](/basics/guardrails/overview) section.

## The `@hook` Decorator

The `@hook` decorator allows you to configure individual hook behavior. Currently, it supports marking hooks to run in the background when used with [AgentOS](/agent-os/overview).

### Background Execution

By default, hooks are either executed synchronously or asynchronously, in an API context they still block the response until they complete. For hooks that perform non-critical tasks (logging, analytics, notifications), you can mark them to run in the background:

```python
from agno.hooks import hook

@hook(run_in_background=True)
async def send_notification(run_output, agent):
    """This hook will run in the background without blocking the response."""
    await send_email_notification(run_output.content)
```

<Warning>
Background execution requires [AgentOS](/agent-os/overview). When running agents directly (not through AgentOS), hooks marked with `run_in_background=True` will still execute synchronously.
</Warning>

### When to Use Background Hooks

Background hooks are ideal for:
- **Logging and analytics**: Record metrics without affecting response time
- **Notifications**: Send emails, Slack messages, or webhooks
- **Async data storage**: Write to external databases or APIs
- **Non-critical post-processing**: Tasks that don't affect the response

<Note>
Hooks running in background mode (both pre-hooks and post-hooks) cannot modify any of the hook parameters (like `run_input`, `run_output`, `run_context`, etc.) since the agent may process the request before the hook completes. 
Use background mode primarily for post-hooks or for pre-hooks that only perform logging/monitoring. This means background mode is not suitable for Guardrails.
</Note>

For complete documentation on background task execution, see the [Background Tasks](/agent-os/background-tasks/overview) guide.

For the full decorator API, see the [@hook Decorator Reference](/reference/hooks/hook-decorator).

## Developer Resources

- View [Agent Examples](/basics/hooks/usage/agent/input-transformation-pre-hook)
- View [Team Examples](/basics/hooks/usage/team/input-transformation-pre-hook)
- View [Agent Cookbook](https://github.com/agno-agi/agno/tree/main/cookbook/03_agents/hooks)
- View [Team Cookbook](https://github.com/agno-agi/agno/tree/main/cookbook/04_teams/hooks)