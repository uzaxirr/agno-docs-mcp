---
title: Change State On Run
sidebarTitle: Change State On Run
mode: wide
---

This example demonstrates how to manage session state across different runs for different users. It shows how session state persists within the same session but is isolated between different sessions and users.

<Steps>
  <Step title="Create a Python file">
    Create a file called `change_state_on_run.py`
  </Step>

  <Step title="Add code to file">
    ```python change_state_on_run.py
    from agno.agent import Agent
    from agno.db.in_memory import InMemoryDb
    from agno.models.openai import OpenAIChat

    agent = Agent(
        db=InMemoryDb(),
        model=OpenAIChat(id="gpt-5-mini"),
        instructions="Users name is {user_name} and age is {age}",
        debug_mode=True,
    )

    # Sets the session state for the session with the id "user_1_session_1"
    agent.print_response(
        "What is my name?",
        session_id="user_1_session_1",
        user_id="user_1",
        session_state={"user_name": "John", "age": 30},
    )

    # Will load the session state from the session with the id "user_1_session_1"
    agent.print_response("How old am I?", session_id="user_1_session_1", user_id="user_1")

    # Sets the session state for the session with the id "user_2_session_1"
    agent.print_response(
        "What is my name?",
        session_id="user_2_session_1",
        user_id="user_2",
        session_state={"user_name": "Jane", "age": 25},
    )

    # Will load the session state from the session with the id "user_2_session_1"
    agent.print_response("How old am I?", session_id="user_2_session_1", user_id="user_2")
    ```
  </Step>

  <Snippet file="create-venv-step.mdx" />

  <Step title="Install libraries">
    ```bash
    pip install -U agno openai
    ```
  </Step>

  <Snippet file="set-openai-key.mdx" />

  <Step title="Run the agent">
    <CodeGroup>
    ```bash Mac
    python change_state_on_run.py
    ```

    ```bash Windows
    python change_state_on_run.py
    ```
    </CodeGroup>
  </Step>

  <Step title="Find All Cookbooks">
  Explore all the available cookbooks in the Agno repository. Click the link below to view the code on GitHub:

  <Link href="https://github.com/agno-agi/agno/tree/main/cookbook/03_agents/state" target="_blank">
    Agno Cookbooks on GitHub
  </Link>
</Step>
</Steps>

