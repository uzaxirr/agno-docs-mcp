---
title: "Change Session State on Run"
sidebarTitle: "Change State on Run"
mode: wide
---

This example demonstrates how to set and manage session state for different users and sessions. It shows how session state can be passed during runs and persists across multiple interactions within the same session.

<Steps>

    <Step title="Create a Python file">
        Create a file `change_state_on_run.py`
    </Step>

    <Step title="Add code to file">
        ```python change_state_on_run.py
        from agno.db.in_memory import InMemoryDb
        from agno.models.openai import OpenAIChat
        from agno.team import Team

        team = Team(
            db=InMemoryDb(),
            model=OpenAIChat(id="gpt-5-mini"),
            members=[],
            instructions="Users name is {user_name} and age is {age}",
        )

        # Sets the session state for the session with the id "user_1_session_1"
        team.print_response(
            "What is my name?",
            session_id="user_1_session_1",
            user_id="user_1",
            session_state={"user_name": "John", "age": 30},
        )

        # Will load the session state from the session with the id "user_1_session_1"
        team.print_response("How old am I?", session_id="user_1_session_1", user_id="user_1")

        # Sets the session state for the session with the id "user_2_session_1"
        team.print_response(
            "What is my name?",
            session_id="user_2_session_1",
            user_id="user_2",
            session_state={"user_name": "Jane", "age": 25},
        )

        # Will load the session state from the session with the id "user_2_session_1"
        team.print_response("How old am I?", session_id="user_2_session_1", user_id="user_2")
        ```
    </Step>

    <Snippet file="create-venv-step.mdx" />

    <Step title="Install libraries">
        ```bash
        pip install agno openai
        ```
    </Step>

    <Snippet file="set-openai-key.mdx" />

    <Step title="Run the team">
        <CodeGroup>
        ```bash Mac
        python change_state_on_run.py
        ```

        ```bash Windows
        python change_state_on_run.py
        ```
        </CodeGroup>
    </Step>

</Steps>

